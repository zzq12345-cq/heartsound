<!-- Detection Result Page Template -->
<view class="result-page {{showAnimation ? 'animated' : ''}}">
  <!-- Header -->
  <view class="header">
    <view class="header-bg"></view>
    <view class="header-content">
      <text class="header-title">检测完成</text>
      <text class="header-time">{{result.timestamp ? '刚刚' : ''}}</text>
    </view>
  </view>

  <!-- Result card -->
  <view class="result-section">
    <result-card
      result="{{result}}"
      showDetails="{{true}}"
    ></result-card>
  </view>

  <!-- Health suggestions -->
  <view class="suggestions-section">
    <view class="section-header">
      <text class="section-title">健康建议</text>
    </view>

    <view class="suggestions-list">
      <view
        class="suggestion-item"
        wx:for="{{suggestions}}"
        wx:key="index"
        style="animation-delay: {{index * 0.1}}s;"
      >
        <icon-svg name="{{item.iconName}}" size="32" color="{{item.iconColor || '#4A90D9'}}" />
        <text class="suggestion-text">{{item.text}}</text>
      </view>
    </view>
  </view>

  <!-- Emergency contact button (danger only) -->
  <view class="emergency-section" wx:if="{{showEmergencyBtn}}">
    <button
      wx:if="{{emergencyContact}}"
      class="emergency-btn"
      bindtap="callEmergencyContact"
    >
      <icon-svg name="phone" size="36" color="#FFFFFF" />
      <text class="emergency-btn-text">拨打紧急联系人({{emergencyContact.name}})</text>
    </button>
    <button
      wx:else
      class="emergency-btn outline"
      bindtap="goSetEmergencyContact"
    >
      <icon-svg name="phone" size="36" color="#C75450" />
      <text class="emergency-btn-text-outline">设置紧急联系人</text>
    </button>
  </view>

  <!-- Actions -->
  <view class="actions-section">
    <view class="action-row">
      <button class="action-btn primary" bindtap="detectAgain">
        <icon-svg name="refresh" size="36" color="#FFFFFF" />
        <text class="btn-text">再测一次</text>
      </button>
    </view>

    <view class="action-row secondary-actions">
      <button class="action-btn secondary" bindtap="viewHistory">
        <icon-svg name="clipboard" size="32" color="#2C2E33" />
        <text class="btn-text">历史记录</text>
      </button>
      <button class="action-btn secondary" bindtap="consultAI">
        <icon-svg name="robot" size="32" color="#2C2E33" />
        <text class="btn-text">咨询AI</text>
      </button>
    </view>

    <view class="action-row">
      <button class="action-btn text" bindtap="goHome">
        返回首页
      </button>
    </view>
  </view>

  <!-- Disclaimer -->
  <view class="disclaimer-section">
    <view class="disclaimer-card">
      <icon-svg name="medical" size="32" color="#C48A30" />
      <text class="disclaimer-text">{{disclaimer}}</text>
    </view>
  </view>

  <!-- Share button (fixed) -->
  <view class="share-float" wx:if="{{showShare}}" bindtap="shareResult">
    <icon-svg name="share" size="48" color="#4A90D9" />
  </view>
</view>
