<!--
  Pie Chart Component
  饼图组件模板
-->

<view class="pie-chart-container">
  <!-- 标题 -->
  <view wx:if="{{title}}" class="chart-title">{{title}}</view>

  <!-- 图表内容 -->
  <view class="chart-content">
    <!-- 饼图画布 - 始终存在 -->
    <canvas
      type="2d"
      id="pieChart"
      class="chart-canvas"
      style="width: 100%; height: {{height}}rpx;"
    ></canvas>

    <!-- 加载状态遮罩 -->
    <view wx:if="{{loading}}" class="chart-overlay">
      <view class="loading-spinner"></view>
      <text class="loading-text">加载中...</text>
    </view>

    <!-- 图例 -->
    <view wx:if="{{legendItems.length > 0}}" class="chart-legend">
      <view
        wx:for="{{legendItems}}"
        wx:key="key"
        class="legend-item"
      >
        <view class="legend-color" style="background-color: {{item.color}};"></view>
        <text class="legend-label">{{item.label}}</text>
        <text class="legend-value">{{item.percent}}</text>
      </view>
    </view>
  </view>
</view>
