-- ============================================================================
-- 007: Knowledge Base Seed Data
-- 健康知识科普初始文章数据
-- 来源：dify/knowledge-base/ 下的5个Markdown文档，按二级标题拆分
-- ============================================================================

-- ============================================================================
-- 分类1: 心脏基础知识 (heart-basics)
-- 来源: 心脏基础知识.md + 心音检测说明.md
-- ============================================================================

INSERT INTO articles (category_id, title, summary, content, author, read_time, tags, is_featured, sort_order) VALUES

-- 什么是心脏
(1, '什么是心脏？',
 '了解心脏的基本结构和功能，认识这个人体最重要的器官。',
 '心脏是人体最重要的器官之一，位于胸腔中央偏左的位置，大小约与拳头相当。心脏是一个由肌肉组成的泵，负责将血液输送到全身各个器官和组织。

## 心脏的结构

心脏分为四个腔室：

1. **右心房**：接收从全身回流的静脉血
2. **右心室**：将血液泵入肺部进行氧气交换
3. **左心房**：接收从肺部回流的富含氧气的血液
4. **左心室**：将富氧血液泵向全身

## 心脏健康的重要性

心脏健康直接影响全身健康。保持心脏健康可以：
- 确保全身器官获得充足的氧气和营养
- 维持正常的血压水平
- 降低心血管疾病风险
- 提高生活质量和寿命

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["心脏", "基础知识", "器官"]'::jsonb, true, 1),

-- 心跳与心率
(1, '心跳与心率',
 '什么是心跳？正常心率是多少？哪些因素会影响你的心率？',
 '## 什么是心跳？

心跳是心脏肌肉收缩和舒张的过程。每次心跳包括：
- **收缩期（收缩）**：心脏肌肉收缩，将血液泵出
- **舒张期（舒张）**：心脏肌肉放松，血液流入心脏

## 正常心率范围

| 年龄段 | 正常心率（次/分钟） |
|--------|---------------------|
| 成年人 | 60-100 |
| 运动员 | 40-60 |
| 儿童   | 70-120 |
| 婴儿   | 100-160 |

## 影响心率的因素

- **运动**：运动时心率加快
- **情绪**：紧张、焦虑会使心率加快
- **体温**：体温升高时心率加快
- **药物**：某些药物可能影响心率
- **咖啡因**：咖啡、茶等含咖啡因饮品可能使心率加快

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["心跳", "心率", "基础知识"]'::jsonb, false, 2),

-- 心音知识
(1, '认识心音',
 '心音是什么声音？正常心音和异常心音有什么区别？',
 '## 什么是心音？

心音是心脏瓣膜关闭时产生的声音。正常心音包括两种主要声音：

1. **第一心音（S1）**：心室收缩开始时，二尖瓣和三尖瓣关闭产生的声音，听起来像"咚"
2. **第二心音（S2）**：心室舒张开始时，主动脉瓣和肺动脉瓣关闭产生的声音，听起来像"嗒"

正常心音听起来像"咚-嗒、咚-嗒"的节律。

## 异常心音

异常心音可能包括：
- **心杂音**：血流异常产生的额外声音
- **额外心音**：第三心音（S3）或第四心音（S4）
- **心律不齐**：心跳节律不规则

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。如有心脏相关症状，请及时就医。',
 '心音智鉴', 2, '["心音", "S1", "S2", "杂音"]'::jsonb, true, 3),

-- 心音检测说明 - 关于心音智鉴
(1, '心音智鉴使用指南',
 '了解心音智鉴的核心功能、检测步骤和结果解读方法。',
 '## 关于心音智鉴

心音智鉴是一款基于人工智能的心音检测应用，通过树莓派边缘设备采集心音数据，结合深度学习模型进行实时分析，为用户提供便捷的心脏健康自检服务。

## 核心功能

| 功能 | 说明 |
|------|------|
| 心音采集 | 通过电子听诊器采集30秒心音数据 |
| AI分析 | 边缘AI模型实时分析心音特征 |
| 风险评估 | 提供三级风险评估（正常/中等/高风险） |
| 健康追踪 | 云端存储检测记录，追踪健康趋势 |
| AI助手 | 智能健康问答和个性化建议 |

## 检测前准备

为获得最佳检测效果，请注意：
- **休息5分钟**：检测前请静坐休息，让心率稳定
- **避免剧烈运动**：检测前30分钟内避免剧烈运动
- **穿着宽松**：便于放置听诊器探头
- **保持安静**：检测环境尽量安静，减少噪音干扰
- **避免说话**：检测过程中请勿说话或移动

## 检测步骤

1. **连接设备**：扫码或手动输入IP连接树莓派设备
2. **准备检测**：将听诊器探头放置在左胸第4-5肋间
3. **采集心音**：保持静止30秒，系统自动采集
4. **AI分析**：分析过程约需3-5秒
5. **查看结果**：风险等级、概率分布、健康建议

## 结果解读

| 等级 | 含义 | 建议 |
|------|------|------|
| 正常 | 心音特征正常 | 继续保持健康生活方式 |
| 中等风险 | 检测到轻微异常 | 建议近期就医检查 |
| 高风险 | 检测到明显异常 | 建议尽快就医 |

⚠️ **重要声明**：心音智鉴检测结果仅供健康参考，不能替代专业医疗诊断。',
 '心音智鉴', 5, '["心音智鉴", "使用指南", "检测"]'::jsonb, true, 4),

-- 心音检测常见问题
(1, '心音检测常见问题',
 '检测结果异常怎么办？为什么结果不同？多久检测一次？',
 '## Q1：检测结果显示"异常"怎么办？

首先不要过度紧张。心音智鉴检测结果仅供参考，不能作为诊断依据。建议：
1. 在安静环境下重新检测一次
2. 如果多次检测均显示异常，建议就医
3. 将检测记录提供给医生参考

## Q2：为什么同一天检测结果不同？

心音可能受多种因素影响：
- 检测时的姿势和呼吸状态
- 检测前的活动情况
- 探头放置位置的微小差异
- 环境噪音干扰

建议在相似条件下进行检测，以便对比。

## Q3：检测需要多久进行一次？

- 一般建议每周1-2次常规检测
- 身体不适时可随时检测
- 检测频率可根据个人情况调整

## Q4：儿童可以使用吗？

可以，但请注意：
- 儿童心率正常范围与成人不同
- 检测时需保持儿童安静
- 结果解读需考虑年龄因素
- 如有疑问请咨询儿科医生

⚠️ **免责声明**：心音智鉴检测结果仅供健康参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["FAQ", "常见问题", "检测"]'::jsonb, false, 5);

-- ============================================================================
-- 分类2: 常见心脏问题 (heart-problems)
-- 来源: 常见心脏问题.md
-- ============================================================================

INSERT INTO articles (category_id, title, summary, content, author, read_time, tags, is_featured, sort_order) VALUES

-- 心律不齐
(2, '心律不齐',
 '什么是心律不齐？有哪些类型？何时需要就医？',
 '## 什么是心律不齐？

心律不齐（心律失常）是指心跳的节律或速度异常。心脏正常情况下以规律的节奏跳动，当心脏的电信号传导出现问题时，可能导致心律不齐。

## 心律不齐的类型

| 类型 | 描述 | 常见症状 |
|------|------|----------|
| 心动过速 | 心跳过快（>100次/分钟） | 心悸、气短、头晕 |
| 心动过缓 | 心跳过慢（<60次/分钟） | 疲劳、头晕、晕厥 |
| 早搏 | 心脏提前跳动 | 心跳漏跳感、心悸 |
| 房颤 | 心房不规则跳动 | 心悸、胸闷、乏力 |

## 何时需要就医？

如果出现以下情况，建议及时就医：
- 持续的心悸或心跳不规则
- 胸痛或胸闷
- 呼吸困难
- 头晕或晕厥
- 极度疲劳

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["心律不齐", "心律失常", "心悸"]'::jsonb, true, 1),

-- 心脏杂音
(2, '心脏杂音',
 '心脏杂音是什么？所有杂音都意味着心脏有问题吗？',
 '## 什么是心脏杂音？

心脏杂音是指心脏跳动时产生的异常声音，通常是血液流动湍急产生的。并非所有心脏杂音都意味着心脏有问题。

## 心脏杂音的分类

### 1. 功能性杂音（无害性杂音）
- 常见于儿童和青少年
- 通常无需治疗
- 随年龄增长可能消失

### 2. 器质性杂音
- 由心脏结构异常引起
- 如瓣膜问题、先天性心脏病
- 需要医学评估和可能的治疗

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。',
 '心音智鉴', 2, '["心脏杂音", "瓣膜", "先天性心脏病"]'::jsonb, false, 2),

-- 高血压
(2, '高血压与心脏健康',
 '高血压是什么？血压标准是多少？高血压对心脏有哪些影响？',
 '## 什么是高血压？

高血压是指血液对血管壁的压力持续过高。长期高血压会增加心脏病、中风等疾病的风险。

## 血压标准

| 分类 | 收缩压（mmHg） | 舒张压（mmHg） |
|------|----------------|----------------|
| 正常 | <120 | <80 |
| 正常高值 | 120-139 | 80-89 |
| 高血压1级 | 140-159 | 90-99 |
| 高血压2级 | ≥160 | ≥100 |

## 高血压的影响

- 增加心脏负担
- 损伤血管壁
- 增加心脏病风险
- 增加中风风险

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["高血压", "血压", "心血管"]'::jsonb, false, 3),

-- 冠心病
(2, '冠心病',
 '什么是冠心病？主要症状和危险因素有哪些？',
 '## 什么是冠心病？

冠心病是指冠状动脉（为心脏供血的血管）发生粥样硬化或狭窄，导致心脏供血不足。

## 主要症状

- 胸痛或胸闷（心绞痛）
- 活动时呼吸困难
- 疲劳感
- 心悸

## 危险因素

- 高血压
- 高胆固醇
- 糖尿病
- 吸烟
- 肥胖
- 缺乏运动
- 家族史

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["冠心病", "心绞痛", "动脉硬化"]'::jsonb, false, 4),

-- 心力衰竭
(2, '心力衰竭',
 '什么是心力衰竭？有哪些常见症状需要警惕？',
 '## 什么是心力衰竭？

心力衰竭是指心脏无法有效地泵血，无法满足身体的需求。这并不意味着心脏停止工作，而是心脏功能减弱。

## 常见症状

- 呼吸困难，尤其是平躺时
- 腿部或脚踝肿胀
- 持续的疲劳和虚弱
- 运动耐力下降
- 夜间咳嗽

⚠️ **重要提醒**：以上内容仅供健康科普参考，不能替代专业医疗诊断。如有心脏相关症状或疑虑，请及时就医检查。',
 '心音智鉴', 2, '["心力衰竭", "心衰", "呼吸困难"]'::jsonb, false, 5);

-- ============================================================================
-- 分类3: 健康生活建议 (healthy-living)
-- 来源: 健康生活建议.md
-- ============================================================================

INSERT INTO articles (category_id, title, summary, content, author, read_time, tags, is_featured, sort_order) VALUES

-- 心脏健康饮食
(3, '心脏健康饮食指南',
 '哪些食物有益心脏健康？哪些食物应该限制？科学饮食小贴士。',
 '## 推荐食物

| 食物类别 | 推荐选择 | 益处 |
|----------|----------|------|
| 蔬菜水果 | 深色蔬菜、浆果、柑橘类 | 富含抗氧化剂，降低心血管风险 |
| 全谷物 | 燕麦、糙米、全麦面包 | 降低胆固醇，稳定血糖 |
| 优质蛋白 | 鱼类、豆类、瘦肉 | 提供必需营养，减少饱和脂肪 |
| 健康脂肪 | 橄榄油、坚果、牛油果 | 改善血脂，保护血管 |

## 应限制的食物

- **高盐食物**：腌制品、加工食品、快餐
- **高糖食物**：甜饮料、糕点、糖果
- **高脂肪食物**：油炸食品、肥肉、动物内脏
- **酒精**：建议限制或避免饮酒

## 饮食小贴士

1. 每餐一半盘子放蔬菜
2. 选择低钠调味品
3. 多喝水，少喝含糖饮料
4. 细嚼慢咽，避免过饱
5. 规律三餐，少吃零食

⚠️ **重要提醒**：以上内容仅供健康生活参考，不能替代专业医疗建议。',
 '心音智鉴', 4, '["饮食", "营养", "健康食物"]'::jsonb, true, 1),

-- 运动建议
(3, '运动与心脏健康',
 '多少运动量对心脏有益？适合心脏健康的运动有哪些？运动注意事项。',
 '## 推荐运动量

世界卫生组织建议成年人：
- 每周至少150分钟中等强度有氧运动
- 或每周至少75分钟高强度有氧运动
- 每周2次以上力量训练

## 适合心脏健康的运动

| 运动类型 | 示例 | 建议频率 |
|----------|------|----------|
| 有氧运动 | 快走、游泳、骑车、慢跑 | 每周5次，每次30分钟 |
| 力量训练 | 哑铃、俯卧撑、深蹲 | 每周2-3次 |
| 柔韧性运动 | 瑜伽、拉伸 | 每天10分钟 |

## 运动注意事项

- 运动前适当热身
- 循序渐进，不要突然剧烈运动
- 运动中如有不适立即停止
- 心脏病患者运动前咨询医生
- 避免在极端天气下户外运动

⚠️ **重要提醒**：以上内容仅供健康生活参考，不能替代专业医疗建议。',
 '心音智鉴', 3, '["运动", "有氧运动", "力量训练"]'::jsonb, false, 2),

-- 睡眠与心脏健康
(3, '睡眠与心脏健康',
 '睡眠对心脏有什么影响？如何改善睡眠质量？',
 '## 睡眠对心脏的影响

良好的睡眠对心脏健康至关重要：
- 降低血压
- 减轻心脏负担
- 促进心血管修复
- 调节激素水平

## 建议睡眠时长

| 年龄段 | 建议睡眠时间 |
|--------|--------------|
| 成年人（18-64岁） | 7-9小时 |
| 老年人（65岁以上） | 7-8小时 |

## 改善睡眠的方法

1. 保持规律的作息时间
2. 创造舒适的睡眠环境
3. 睡前避免使用电子设备
4. 避免睡前摄入咖啡因和酒精
5. 适量运动有助于睡眠

⚠️ **重要提醒**：以上内容仅供健康生活参考，不能替代专业医疗建议。',
 '心音智鉴', 2, '["睡眠", "作息", "心脏健康"]'::jsonb, false, 3),

-- 压力管理
(3, '压力管理与心脏',
 '长期压力如何影响心脏？有哪些科学的减压方法？',
 '## 压力对心脏的影响

长期压力可能导致：
- 血压升高
- 心率加快
- 不健康的应对行为（暴饮暴食、吸烟等）
- 增加心脏病风险

## 减压方法

1. **深呼吸练习**：每天练习5-10分钟
2. **冥想**：帮助放松身心
3. **规律运动**：释放压力激素
4. **社交活动**：与朋友家人交流
5. **培养爱好**：转移注意力
6. **寻求帮助**：必要时咨询专业人士

⚠️ **重要提醒**：以上内容仅供健康生活参考，不能替代专业医疗建议。',
 '心音智鉴', 2, '["压力", "减压", "心理健康"]'::jsonb, false, 4),

-- 戒烟限酒
(3, '戒烟限酒护心脏',
 '吸烟对心脏的危害有多大？戒烟后身体会有哪些变化？',
 '## 吸烟对心脏的危害

- 损伤血管内壁
- 增加血液黏稠度
- 降低血液含氧量
- 显著增加心脏病风险

## 戒烟的好处

- 20分钟内：心率和血压开始下降
- 12小时后：血液中一氧化碳水平恢复正常
- 1年后：冠心病风险降低50%
- 15年后：冠心病风险接近不吸烟者

## 饮酒建议

如果饮酒，建议适量：
- 男性：每天不超过2个标准杯
- 女性：每天不超过1个标准杯
- 最好完全不饮酒

⚠️ **重要提醒**：以上内容仅供健康生活参考，不能替代专业医疗建议。',
 '心音智鉴', 3, '["戒烟", "限酒", "健康习惯"]'::jsonb, false, 5);

-- ============================================================================
-- 分类4: 就医指导 (medical-guide)
-- 来源: 就医指导.md
-- ============================================================================

INSERT INTO articles (category_id, title, summary, content, author, read_time, tags, is_featured, sort_order) VALUES

-- 何时应该就医
(4, '何时应该就医？',
 '紧急情况、需要尽快就医的情况、建议定期检查的人群——全面的就医时机指南。',
 '## 紧急情况 - 立即就医

如果出现以下症状，请立即拨打120或前往急诊：

**心脏病发作的警示信号**：
- 胸部剧烈疼痛或压迫感，持续数分钟
- 疼痛放射至手臂、颈部、下巴或背部
- 严重的呼吸困难
- 大汗淋漓
- 恶心或呕吐
- 突然晕厥

**中风的警示信号**（FAST原则）：
- **F（Face）**：面部下垂或麻木
- **A（Arm）**：手臂无力或麻木
- **S（Speech）**：言语困难或含糊
- **T（Time）**：立即拨打急救电话

## 需要尽快就医的情况

以下情况建议尽快预约就诊（1-2天内）：
- 新出现的心悸或心跳不规则
- 持续的胸闷或不适
- 轻微活动后明显气短
- 腿部或脚踝异常肿胀
- 不明原因的极度疲劳
- 头晕或接近晕厥

## 建议定期检查的人群

- 有心脏病家族史
- 高血压患者
- 糖尿病患者
- 高胆固醇人群
- 吸烟者
- 肥胖人群
- 50岁以上人群

⚠️ **重要声明**：如有心脏相关症状，请及时就医。',
 '心音智鉴', 4, '["就医", "急诊", "警示信号"]'::jsonb, true, 1),

-- 就诊前准备
(4, '就诊前准备清单',
 '看心脏科之前需要准备什么？信息清单和携带物品指南。',
 '## 信息准备清单

就诊前请准备以下信息：

### 1. 症状描述
- 什么时候开始的？
- 症状持续多长时间？
- 什么情况下加重或缓解？
- 严重程度如何？（1-10分）

### 2. 病史信息
- 既往疾病史
- 手术史
- 过敏史
- 家族病史

### 3. 用药信息
- 目前服用的所有药物
- 保健品和中药
- 药物剂量和服用频率

### 4. 生活方式信息
- 饮食习惯
- 运动情况
- 吸烟饮酒情况
- 压力水平

## 携带物品

- 身份证和医保卡
- 既往检查报告（心电图、超声等）
- 药物清单或药盒
- 记录症状的笔记

⚠️ **重要声明**：心音智鉴检测结果仅供健康参考，不能替代专业医疗诊断。',
 '心音智鉴', 3, '["就诊准备", "就医指导", "病史"]'::jsonb, false, 2),

-- 常见心脏检查
(4, '常见心脏检查项目',
 '心电图、心脏超声、动态心电图...了解常见心脏检查项目和用途。',
 '## 基础检查

| 检查项目 | 用途 | 时长 |
|----------|------|------|
| 心电图（ECG） | 记录心脏电活动 | 5-10分钟 |
| 血压测量 | 评估血压水平 | 5分钟 |
| 血液检查 | 检测心脏标志物、血脂等 | 抽血后等待结果 |
| 听诊 | 听心音，发现异常 | 5分钟 |

## 进一步检查

| 检查项目 | 用途 | 说明 |
|----------|------|------|
| 心脏超声 | 观察心脏结构和功能 | 无创，约30分钟 |
| 动态心电图 | 24小时监测心律 | 佩戴设备1-2天 |
| 运动负荷试验 | 评估运动时心脏功能 | 需要跑步或骑车 |
| 冠脉CT | 检查冠状动脉 | 需要造影剂 |
| 心脏导管检查 | 详细评估冠脉情况 | 微创，需住院 |

⚠️ **重要声明**：以上内容仅供参考，具体检查方案请遵医嘱。',
 '心音智鉴', 3, '["心脏检查", "心电图", "超声"]'::jsonb, false, 3),

-- 选择医院和科室
(4, '选择医院和科室指南',
 '心脏问题该挂什么科？首次就诊从哪个科室开始？',
 '## 相关科室

- **心内科**：心律失常、冠心病、高血压等
- **心外科**：需要手术治疗的心脏疾病
- **急诊科**：紧急情况
- **全科/内科**：一般健康问题

## 就诊建议

- 首次就诊可从全科或心内科开始
- 携带心音智鉴的检测记录供医生参考
- 如实告知医生所有症状和担忧
- 遵医嘱进行必要的检查

## 心音检测的作用

心音智鉴通过采集和分析心音，可以：
- 初步筛查心音异常
- 评估心脏健康风险等级
- 追踪心音变化趋势
- 提供健康参考建议

### 心音检测的局限性

心音智鉴检测：
- **不能替代**专业医疗诊断
- **不能确诊**任何心脏疾病
- **不能替代**标准医学检查
- 结果仅供参考

⚠️ **重要声明**：心音智鉴检测结果仅供健康参考，不能替代专业医疗诊断。任何健康问题请咨询医生。',
 '心音智鉴', 3, '["科室", "就医", "心内科"]'::jsonb, false, 4);

-- ============================================================================
-- Update article_count for each category
-- ============================================================================

UPDATE article_categories SET article_count = (
  SELECT COUNT(*) FROM articles WHERE articles.category_id = article_categories.id AND articles.is_published = true
);
