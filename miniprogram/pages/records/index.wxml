<!-- Records Page Template - Health Records -->
<view class="page-container">
  <!-- Filter Tabs -->
  <view class="filter-section">
    <scroll-view class="filter-scroll" scroll-x enable-flex>
      <view
        wx:for="{{filterOptions}}"
        wx:key="key"
        class="filter-tab {{currentFilter === item.key ? 'active' : ''}}"
        data-filter="{{item.key}}"
        bindtap="onFilterChange"
      >
        <text class="filter-label">{{item.label}}</text>
        <view class="filter-indicator" wx:if="{{currentFilter === item.key}}"></view>
      </view>
    </scroll-view>
  </view>

  <!-- Records List -->
  <view class="records-section" wx:if="{{!isEmpty}}">
    <!-- Summary -->
    <view class="records-summary" wx:if="{{total > 0}}">
      <text class="summary-text">共 {{total}} 条检测记录</text>
    </view>

    <!-- Record Items -->
    <view
      wx:for="{{records}}"
      wx:key="id"
      class="record-item"
      data-record="{{item}}"
      bindtap="onRecordTap"
    >
      <!-- Date Header -->
      <view class="record-date">
        <icon-svg name="clock" size="28" color="#999" />
        <text class="date-text">{{item.displayDate}}</text>
      </view>

      <!-- Result Card -->
      <result-card
        result="{{item}}"
        compact="{{true}}"
        showDetails="{{false}}"
        bind:tap="onRecordTap"
      />
    </view>

    <!-- Loading More -->
    <view class="loading-more" wx:if="{{showLoadingMore}}">
      <view class="loading-spinner"></view>
      <text class="loading-text">加载中...</text>
    </view>

    <!-- No More -->
    <view class="no-more" wx:if="{{!hasMore && records.length > 0}}">
      <text class="no-more-text">— 没有更多了 —</text>
    </view>
  </view>

  <!-- Empty State -->
  <view class="empty-state" wx:if="{{isEmpty && !loading}}">
    <view class="empty-state-icon">
      <icon-svg name="clipboard" size="64" color="#4A90D9" />
    </view>
    <text class="empty-state-title">暂无检测记录</text>
    <text class="empty-state-desc">完成首次心音检测后，记录将显示在这里</text>
    <view class="empty-state-action" bindtap="goToDetection">开始检测</view>
  </view>

  <!-- Initial Loading -->
  <view class="initial-loading" wx:if="{{loading && records.length === 0}}">
    <view class="loading-spinner large"></view>
    <text class="loading-text">加载中...</text>
  </view>
</view>
